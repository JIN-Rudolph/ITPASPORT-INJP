<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ç¢ºç‡ã¨çµ±è¨ˆã‚¯ã‚¤ã‚º | Stats Quiz</title>
  <link rel="stylesheet" href="stats.css">
</head>
<body>
  <header>
    <h1>ğŸ“ ç¢ºç‡ã¨çµ±è¨ˆã‚¯ã‚¤ã‚º</h1>
    <p>4æŠ + å…¥åŠ›å¼ã§ãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼</p>
  </header>

  <main class="quiz-container">
    <div class="progress-bar"><div id="progress" class="progress">0%</div></div>
    <div id="question-container"></div>
    <div class="quiz-options" id="options"></div>
    <div id="feedback" class="result"></div>
    <footer>
      <p><a href="stats_home.html">ğŸ“˜ ç¢ºç‡ã¨çµ±è¨ˆã‚µãƒ–ãƒ›ãƒ¼ãƒ ã¸</a></p>
    </footer>
  </main>

  <script>
    const questions = [
      {q:"ã‚µã‚¤ã‚³ãƒ­ã‚’1å›æŠ•ã’ã‚‹ã€‚å¶æ•°ãŒå‡ºã‚‹ç¢ºç‡ã¯ï¼Ÿ", options:["1/6","1/2","2/3","5/6"], answer:1},
      {q:"ãƒ‡ãƒ¼ã‚¿ {2,4,4,6,8} ã®å¹³å‡ã¯ï¼Ÿ", options:["4","4.8","5","6"], answer:1},
      {q:"ã‚³ã‚¤ãƒ³ã‚’2å›æŠ•ã’ã‚‹ã€‚è¡¨ãŒ2å›å‡ºã‚‹ç¢ºç‡ã¯ï¼Ÿ (å…¥åŠ›)", input:true, answer:"1/4"}
    ];

    let remainingQuestions = [...questions];
    let totalQuestions = questions.length;
    let currentQuestion = 0;
    let score = 0;

    function updateProgress() {
      const progress = document.getElementById('progress');
      const percent = Math.round((currentQuestion / totalQuestions) * 100);
      progress.style.width = percent + '%';
      progress.textContent = percent + '%';
    }

    function showQuestion() {
      if (remainingQuestions.length === 0) {
        document.getElementById('question-container').innerHTML = '<h2>ğŸ‰ ã‚¯ã‚¤ã‚ºçµ‚äº†ï¼</h2>';
        document.getElementById('options').innerHTML = '';
        document.getElementById('feedback').textContent = 'ã‚¹ã‚³ã‚¢: ' + score + '/' + totalQuestions;
        return;
      }
      const qObj = remainingQuestions.shift();
      currentQuestion++;

      document.getElementById('question-container').innerHTML = '<p><strong>Q' + currentQuestion + ':</strong> ' + qObj.q + '</p>';
      const optionsDiv = document.getElementById('options');
      optionsDiv.innerHTML = '';

      if (qObj.input) {
        const input = document.createElement('input');
        input.type = 'text';
        input.id = 'user-answer';
        input.placeholder = 'ç­”ãˆã‚’å…¥åŠ›';
        optionsDiv.appendChild(input);

        const btn = document.createElement('button');
        btn.textContent = 'ç­”ãˆåˆã‚ã›';
        btn.onclick = () => checkAnswer(input.value.trim(), qObj.answer);
        optionsDiv.appendChild(btn);
      } else {
        qObj.options.forEach((opt, i) => {
          const btn = document.createElement('button');
          btn.textContent = opt;
          btn.onclick = () => checkAnswer(i, qObj.answer);
          optionsDiv.appendChild(btn);
        });
      }
      updateProgress();
    }

    function checkAnswer(selected, correct) {
      const feedback = document.getElementById('feedback');
      if (selected === correct || selected === correct.toString()) {
        feedback.textContent = 'âœ… æ­£è§£ï¼';
        feedback.style.color = 'green';
        score++;
      } else {
        feedback.textContent = 'âŒ ä¸æ­£è§£â€¦ æ­£è§£ã¯ ' + correct;
        feedback.style.color = 'red';
      }
      setTimeout(() => {
        feedback.textContent = '';
        showQuestion();
      }, 1200);
    }

    showQuestion();
  </script>
</body>
</html>
